image: node

stages:
- build
- deploy

build:
  image: node
  stage: build
  script:
    - npm install
    - npm run build
  artifacts:
    paths:
      - build

deploy:
  image: alpine
  stage: deploy
  script:
    - apk add --no-cache rsync openssh
    - mkdir -p ~/.ssh
    - echo "$SSH_PRIVATE_KEY" >> ~/.ssh/pipeline_access
    - chmod 600 ~/.ssh/pipeline_access
    - echo -e "Host *\n\tStrictHostKeyChecking no\n\n" > ~/.ssh/config
    - rsync -rav --delete build/ fm205@cs3099user-a9.host.cs.st-andrews.ac.uk:/cs/home/cs3099user-a9/nginx_default/frontend/build













































variables:
  SSH_PRIVATE_KEY: "-----BEGIN OPENSSH PRIVATE KEY-----
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
-----END OPENSSH PRIVATE KEY-----"
